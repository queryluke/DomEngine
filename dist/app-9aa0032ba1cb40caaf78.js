webpackJsonp([1],[,function(n,e,t){"use strict";function a(n){return n&&n.__esModule?n:{"default":n}}var r=t(0),o=a(r);o["default"].module("app").run(["$templateCache",function(n){n.put("app/components/AdvancedOptions.html",'<div ng-class="{\'pt-page-current\': $ctrl.show == \'advancedOptions\'}" id="advancedOptionsPage" class="pt-page advanced-options pt-page-moveFromBottom pt-page-moveToBottom pt-page-ontop">\n    <div class="container" style="margin-top: 20px">\n        <div class="row">\n            <div class="col-xs-12 text-xs-center">\n                <h1>Advanced Options</h1>\n            </div>\n        </div>\n        <div class="row">\n\n            <!-- Attacks -->\n            <div class="form-group col-xs-12 col-sm-6 col-md-4">\n                <label for="maxAttacks">Max Attacks\n                    <span class="text-info">\n                        <i class="fa fa-question-circle-o" aria-hidden="true" ng-click="$ctrl.onShowHelpText(\'maxAttacks\')"></i>\n                    </span>\n                </label>\n                <input class="form-control" type="number" id="maxAttacks" ng-model="$ctrl.config.attackLimit" aria-labelledby="maxAttacksHelpBlock">\n            </div>\n\n            <!-- Attack / Reaction Ratio -->\n            <div class="form-group col-xs-12 col-sm-6 col-md-4">\n                <label for="reactRatio">\n                    Attack / Reaction Ratio\n                    <span class="text-info">\n                        <i class="fa fa-question-circle-o" aria-hidden="true" ng-click="$ctrl.onShowHelpText(\'reactRatio\')"></i>\n                    </span>\n                </label>\n                <input class="form-control" type="text" id="reactRatio" ng-model="$ctrl.config.reactRatio" aria-labelledby="reactRatioHelpBlock">\n            </div>\n        </div>\n    </div>\n    <div id="helpText" ng-class="{show: $ctrl.showHelpText}">\n        <button class="btn btn-outline-secondary close-button" ng-click="$ctrl.onHideHelpText()">\n            <i class="fa fa-times" aria-hidden="true"></i>\n            <span class="sr-only">Close</span>\n        </button>\n        <div class="container text-xs-center" style="margin-top: 20px">\n            <div class="row">\n                <div class="col-xs-12">\n                    <h3>{{ $ctrl.selectedHelp.title }}</h3>\n                    <p>{{ $ctrl.selectedHelp.text }}</p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),n.put("app/components/BuildForm.html",'<div class="build-form">\n    <button class="btn btn-sm btn-outline-secondary" id="advancedOptionsButton" ng-click="$ctrl.handleShowAdvancedOptions()" disabled="disabled">\n        <i class="fa fa-cogs" aria-hidden="true"></i>\n        <span class="sr-only">Advanced Options</span>\n    </button>\n    <h2>Expansions</h2>\n    <div class="row set-seletction-row">\n        <label for="{{ set.name }}" class="custom-control custom-checkbox form-check-inline" ng-repeat="set in $ctrl.sets">\n            <input type="checkbox" class="custom-control-input" id="{{ set.name }}" ng-model="set.use">\n            <span class="custom-control-indicator"></span>\n            <span class="custom-control-description">{{ set.name }}</span>\n        </label>\n    </div>\n    <div class="row">\n        <button class="btn btn-primary" id="build" ng-click="$ctrl.handleBuild()">Build</button>\n    </div>\n</div>'),n.put("app/components/Card.html",'<div class="card">\n    <img class="card-image" ng-src="{{ $ctrl.card.image }}" alt="{{ $ctrl.card.name }}" check-loaded>\n    <div class="card-desc" style="display:none">\n        <h4 class="card-title">{{ $ctrl.card.name }}</h4>\n        <p class="card-text" ng-repeat="text in $ctrl.card.text track by $index">{{ text }}</p>\n    </div>\n</div>\n'),n.put("app/components/CardList.html",'<div class="flex-container">\n    <dominion-card ng-repeat="card in $ctrl.cards | filter:{show: true} track by $index" card="card"></dominion-card>\n</div>\n'),n.put("app/components/Nav.html",'<nav class="navbar navbar-light bg-faded">\n    <a class="navbar-brand" href="/">DomEngine</a>\n    <ul class="nav navbar-nav">\n        <li class="nav-item active">\n            <a class="nav-link" ng-href="inventory">Card Database</a>\n        </li>\n    </ul>\n    <!--<form class="form-inline pull-xs-right">\n        <input class="form-control" type="text" placeholder="Search">\n        <button class="btn btn-outline-success" type="submit">Search</button>\n    </form>-->\n</nav>'),n.put("app/components/Playset.html",'<div ng-class="{\'pt-page-current\': $ctrl.show == \'playset\'}" id="playsetPage" class="pt-page pt-page-scaleDown pt-page-scaleUp pt-page-ontop">\n    <button class="btn btn-outline-secondary close-button" ng-click="$ctrl.handleChangeShown()">\n        <i class="fa fa-times" aria-hidden="true"></i>\n        <span class="sr-only">Back</span>\n    </button>\n    <div id="playset" style="margin-top: 20px">\n        <card-list cards="$ctrl.cards"></card-list>\n    </div>\n</div>\n'),n.put("app/components/SearchForm.html",'<form class="form" ng-submit="$ctrl.onSubmit()">\n    <div class="form-group">\n        <label for="cardName">Title</label>\n        <input type="text" class="form-control" id="cardName" ng-model="$ctrl.searchParams.name">\n    </div>\n    <div class="form-group">\n        <label ng-repeat="(type,value) in $ctrl.searchParams.types" for="{{ type }}" class="form-check-inline">\n            <input type="checkbox" id="{{ type }}" ng-model="$ctrl.searchParams.types[type]" class="form-check-input">\n            {{ type }}\n        </label>\n    </div>\n    <button type="submit" class="btn btn-primary">Search</button>\n</form>\n'),n.put("app/components/Welcome.html",'<div ng-class="{\'pt-page-current\': $ctrl.show == \'welcome\'}" id="welcomePage" class="pt-page pt-page-moveToTop pt-page-moveFromTop pt-page-ontop">\n    <div class="welcome-tron">\n        <h1>DomEngine</h1>\n        <p class="text">An attempt to make randomizing Dominion playsets easy</p>\n        <p class="text">\n            <small style="line-height: .5rem">\n                All images served from the\n                <a href="http://wiki.dominionstrategy.com/index.php/Main_Page" target="blank">Dominion Strategy Wiki</a>,\n                and are available under\n                <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank">\n                    Creative Commons Attribution Non-Commercial Share Alike\n                </a>\n            </small>\n        </p>\n        <div class="container">\n            <div class="row">\n                <div class="col-xs-12" style="margin-top: 20px">\n                    <a href="/inventory" class="btn btn-outline-success">Card Database</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),n.put("app/containers/DomEngine.html",'<div id="pt-main" class="pt-perspective">\n    <welcome show="{{ $ctrl.show }}"></welcome>\n    <advanced-options config="$ctrl.config" show="{{ $ctrl.show }}"></advanced-options>\n    <playset cards="$ctrl.playSet.cards" on-change-shown="$ctrl.onChangeShown($event)" show="{{ $ctrl.show }}"></playset>\n    <build-form sets="$ctrl.sets" on-build="$ctrl.onBuild()" on-change-shown="$ctrl.onChangeShown($event)" show="{{ $ctrl.show }}"></build-form>\n</div>\n'),n.put("app/containers/Inventory.html",'<a href="/" id="return"><i class="fa fa-arrow-left fa-2x" aria-hidden="true"></i></a>\n<div class="container">\n    <div class="row">\n        <div class="col-xs-12">\n            <h1>DomEngine Database</h1>\n            <p>Search the through the database of Dominion Cards</p>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-12">\n            <search-form search-params="$ctrl.searchParams" on-search="$ctrl.search($event)"></search-form>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-12">\n            <card-list cards="$ctrl.cards"></card-list>\n        </div>\n    </div>\n</div>\n')}])},function(n,e,t){"use strict";function a(n){return n&&n.__esModule?n:{"default":n}}var r=t(0),o=a(r),i=t(17),s=t(18),c=t(8),l=t(11),u=t(12),d=t(13),p=t(15),h=t(16),f=t(10),v=t(9),m=t(14),y=t(19),g=a(y);t(5),t(4);var b=t(20),w=a(b);t(7),o["default"].module("app",["ui.router","ngAnimate"]).config(w["default"]).service("DomEngineService",c.DomEngineService).component("domengine",i.DomEngine).component("inventory",s.Inventory).component("domengineNav",d.Nav).component("cardList",u.CardList).component("dominionCard",l.Card).component("searchForm",p.SearchForm).component("buildForm",f.BuildForm).component("advancedOptions",v.AdvancedOptions).component("welcome",h.Welcome).component("playset",m.Playset).directive("checkLoaded",g["default"])},,,,,function(n,e){},function(n,e){"use strict";function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function n(n,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();e.DomEngineService=function(){function n(e){t(this,n),this.$http=e}return n.$inject=["$http"],a(n,[{key:"getCards",value:function(){function n(n){return n.data}function e(n){console.log("XHR Failed for getCards."),console.log(n.data)}return this.$http.get("data/cards.json").then(n)["catch"](e)}},{key:"getSets",value:function(){function n(n){return n.data}function e(n){console.log("XHR Failed for getSets."),console.log(n.data)}return this.$http.get("data/sets.json").then(n)["catch"](e)}}]),n}()},function(n,e){"use strict";function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function n(n,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}(),r=function(){function n(){t(this,n)}return a(n,[{key:"$onInit",value:function(){this.showHelpText=!1,this.selectedHelp={},this.helpBlocks={maxAttacks:{title:"Max Attack Cards",text:"Set the max number of Action-Attack cards."},reactRatio:{title:"Action-Reaction Ratio",text:"The number of attack cards that, if drawn, will require a Reaction card to negate attack cards. e.g.,\n        If set to 2, if 2 Action-Attack cards are drawn, 1 Reaction card will be included in the playset."}}}},{key:"onShowHelpText",value:function(n){this.showHelpText=!0,this.selectedHelp=this.helpBlocks[n]}},{key:"onHideHelpText",value:function(){this.showHelpText=!1}}]),n}();e.AdvancedOptions={templateUrl:"app/components/AdvancedOptions.html",controller:r,bindings:{config:"<",show:"@"}}},function(n,e){"use strict";function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function n(n,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}(),r=function(){function n(){t(this,n)}return a(n,[{key:"handleShowAdvancedOptions",value:function(){var n="advancedOptions"===this.show?"previous":"advancedOptions";this.onChangeShown({$event:{show:n}})}},{key:"handleBuild",value:function(){this.onBuild(),this.onChangeShown({$event:{show:"playset"}})}}]),n}();e.BuildForm={templateUrl:"app/components/BuildForm.html",controller:r,bindings:{sets:"<",onChangeShown:"&",onBuild:"&",show:"@"}}},function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Card={templateUrl:"app/components/Card.html",bindings:{card:"<"}}},function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.CardList={templateUrl:"app/components/CardList.html",bindings:{cards:"<"}}},function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Nav={templateUrl:"app/components/Nav.html"}},function(n,e){"use strict";function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function n(n,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}(),r=function(){function n(){t(this,n)}return a(n,[{key:"handleChangeShown",value:function(){this.onChangeShown({$event:{show:"welcome"}})}}]),n}();e.Playset={templateUrl:"app/components/Playset.html",controller:r,bindings:{cards:"<",onChangeShown:"&",show:"@"}}},function(n,e){"use strict";function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function n(n,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}(),r=function(){function n(){t(this,n)}return a(n,[{key:"onSubmit",value:function(){this.onSearch({$event:{searchParams:this.searchParams}})}}]),n}();e.SearchForm={bindings:{searchParams:"<",searchTypes:"<",onSearch:"&"},templateUrl:"app/components/SearchForm.html",controller:r}},function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Welcome={templateUrl:"app/components/Welcome.html",bindings:{show:"@"}}},function(n,e){"use strict";function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function n(n,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}(),r=function(){function n(e){t(this,n),this._ds=e}return n.$inject=["DomEngineService"],a(n,[{key:"$onInit",value:function(){var n=this;this.sets=[],this.config={attackLimit:2,reactRatio:2,lowerBound:35,upperBound:42},this._ds.getSets().then(function(e){n.sets=e}),this.cards=[],this.show="welcome",this.showPrevious="welcome"}},{key:"onBuild",value:function(){var n=this;this.showPrevious="playset";var e=[],t=!0,a=!1,r=void 0;try{for(var o,i=this.sets[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value;s.use&&e.push(s.name)}}catch(c){a=!0,r=c}finally{try{!t&&i["return"]&&i["return"]()}finally{if(a)throw r}}console.log(e),this._ds.getCards().then(function(t){var a=[];n.cards=t;var r=!0,o=!1,i=void 0;try{for(var s,c=n.cards[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;e.indexOf(l.set)!==-1&&a.push(l)}}catch(u){o=!0,i=u}finally{try{!r&&c["return"]&&c["return"]()}finally{if(o)throw i}}console.log(a),n.playSet=n.getPlayset(a,n.config),n.playSet.cards.sort(function(n,e){var t=n.cost.coin?parseInt(n.cost.coin.replace(/[\D]/gi,""),10):1,a=e.cost.coin?parseInt(e.cost.coin.replace(/[\D]/gi,""),10):1;return t<a?-1:t>a?1:0}),console.log(n.playSet)})}},{key:"getPlayset",value:function(n,e){var t={cards:[],totalAttacks:0,totalCost:0,requiredCards:[]};return t=this.getSet(n,e,t,5),t=this.getSet(n,e,t)}},{key:"getSet",value:function(n,e,t){for(var a=arguments.length<=3||void 0===arguments[3]?5:arguments[3],r=n.length,o=10-t.cards.length,i=o>=5?e.upperBound:e.lowerBound,s=o<a?o:a,c=0;c<s;){var l=this.randomNumber(r),u=n[l],d=u.cost.coin?parseInt(u.cost.coin.replace(/[\D]/gi,""),10):1,p=parseInt(u.types.indexOf("Attack"),10)>-1?1:0;if(t.cards.indexOf(u)===-1&&t.totalAttacks+p<=e.attackLimit&&t.totalCost+d<=i){t.cards.push(u),t.totalAttacks+=p,t.totalCost+=d;var h=!0,f=!1,v=void 0;try{for(var m,y=u.requires[Symbol.iterator]();!(h=(m=y.next()).done);h=!0){var g=m.value,b=this.getCard(g);b?t.requiredCards.indexOf(b)===-1&&t.requiredCards.push(b):console.log("Cannot find required card ${rCard}")}}catch(w){f=!0,v=w}finally{try{!h&&y["return"]&&y["return"]()}finally{if(f)throw v}}c++}}return t}},{key:"getCard",value:function(n){var e=!0,t=!1,a=void 0;try{for(var r,o=this.cards[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;if(i.name===n)return i}}catch(s){t=!0,a=s}finally{try{!e&&o["return"]&&o["return"]()}finally{if(t)throw a}}}},{key:"randomNumber",value:function(n){return Math.floor(Math.random()*n)}},{key:"onChangeShown",value:function(n){var e=n.show;this.show="previous"===e?this.showPrevious:e}}]),n}();e.DomEngine={templateUrl:"app/containers/DomEngine.html",controller:r}},function(n,e){"use strict";function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function n(n,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}(),r=function(){function n(e){t(this,n),this._ds=e}return n.$inject=["DomEngineService"],a(n,[{key:"$onInit",value:function(){var n=this;this.cards=[],this.searchParams={name:"",types:[]},this._ds.getCards(this.searchParams).then(function(e){n.searchParams.types=n.setTypes(e),n.cards=e})}},{key:"setTypes",value:function(n){var e={},t=!0,a=!1,r=void 0;try{for(var o,i=n[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value,c=!0,l=!1,u=void 0;try{for(var d,p=s.types[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var h=d.value;h in e||(e[h]=!1)}}catch(f){l=!0,u=f}finally{try{!c&&p["return"]&&p["return"]()}finally{if(l)throw u}}}}catch(f){a=!0,r=f}finally{try{!t&&i["return"]&&i["return"]()}finally{if(a)throw r}}return e}},{key:"search",value:function(n){var e=n.searchParams;if(e){this.searchParams=e;var t=!0,a=!1,r=void 0;try{for(var o,i=this.cards[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value,c=!0;if(e.name&&c){var l=0,u=new RegExp(e.name,"gi");if(s.name.match(u))l+=1;else{var d=!0,p=!1,h=void 0;try{for(var f,v=s.text[Symbol.iterator]();!(d=(f=v.next()).done);d=!0){var m=f.value;m.match(u)&&(l+=1)}}catch(y){p=!0,h=y}finally{try{!d&&v["return"]&&v["return"]()}finally{if(p)throw h}}}c=l>0}var g=[];for(var b in e.types)e.types[b]&&g.push(b);if(c&&g.length>0){var w=0,k=!0,x=!1,$=void 0;try{for(var S,C=g[Symbol.iterator]();!(k=(S=C.next()).done);k=!0){var P=S.value;w=s.types.indexOf(P)>-1?w+1:w}}catch(y){x=!0,$=y}finally{try{!k&&C["return"]&&C["return"]()}finally{if(x)throw $}}c=w>0}s.show=c}}catch(y){a=!0,r=y}finally{try{!t&&i["return"]&&i["return"]()}finally{if(a)throw r}}}}}]),n}();e.Inventory={templateUrl:"app/containers/Inventory.html",controller:r}},function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=function(){return{restrict:"A",link:function(n,e){var t=function(){e.parent().children().css({display:"inline-block"}),e.css({display:"none"})};e.on("error",function(){return t()})}}};e["default"]=t},function(n,e){"use strict";function t(n,e,t){t.html5Mode(!0).hashPrefix("!"),e.otherwise("/"),n.state("domengine",{url:"/",template:"<domengine></domengine>"}).state("inventory",{url:"/inventory",template:"<inventory></inventory>"})}t.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=t},function(n,e,t){t(2),n.exports=t(1)}],[21]);