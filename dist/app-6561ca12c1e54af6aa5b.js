webpackJsonp([1],[,function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}var r=n(0),o=a(r);o["default"].module("app").run(["$templateCache",function(t){t.put("app/components/AdvancedOptions.html",'<div ng-class="{\'pt-page-current\': $ctrl.show == \'advancedOptions\'}" id="advancedOptionsPage" class="pt-page advanced-options pt-page-moveFromBottom pt-page-moveToBottom pt-page-ontop">\n    <div class="container" style="margin-top: 20px">\n        <div class="row">\n            <div class="col-xs-12 text-xs-center">\n                <h1>Advanced Options</h1>\n            </div>\n        </div>\n        <div class="row">\n\n            <!-- Attacks -->\n            <div class="form-group col-xs-12 col-sm-6 col-md-4">\n                <label for="maxAttacks">Max Attacks\n                    <span class="text-info">\n                        <i class="fa fa-question-circle-o" aria-hidden="true" ng-click="$ctrl.onShowHelpText(\'maxAttacks\')"></i>\n                    </span>\n                </label>\n                <input class="form-control" type="number" id="maxAttacks" ng-model="$ctrl.config.attackLimit" aria-labelledby="maxAttacksHelpBlock">\n            </div>\n\n            <!-- Attack / Reaction Ratio -->\n            <div class="form-group col-xs-12 col-sm-6 col-md-4">\n                <label for="reactRatio">\n                    Attack / Reaction Ratio\n                    <span class="text-info">\n                        <i class="fa fa-question-circle-o" aria-hidden="true" ng-click="$ctrl.onShowHelpText(\'reactRatio\')"></i>\n                    </span>\n                </label>\n                <input class="form-control" type="text" id="reactRatio" ng-model="$ctrl.config.reactRatio" aria-labelledby="reactRatioHelpBlock">\n            </div>\n        </div>\n    </div>\n    <div id="helpText" ng-class="{show: $ctrl.showHelpText}">\n        <button class="btn btn-outline-secondary close-button" ng-click="$ctrl.onHideHelpText()">\n            <i class="fa fa-times" aria-hidden="true"></i>\n            <span class="sr-only">Close</span>\n        </button>\n        <div class="container text-xs-center" style="margin-top: 20px">\n            <div class="row">\n                <div class="col-xs-12">\n                    <h3>{{ $ctrl.selectedHelp.title }}</h3>\n                    <p>{{ $ctrl.selectedHelp.text }}</p>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),t.put("app/components/BuildForm.html",'<div class="build-form">\n    <button class="btn btn-sm btn-outline-secondary" id="advancedOptionsButton" ng-click="$ctrl.handleShowAdvancedOptions()" disabled="disabled">\n        <i class="fa fa-cogs" aria-hidden="true"></i>\n        <span class="sr-only">Advanced Options</span>\n    </button>\n    <h2>Expansions</h2>\n    <div class="row set-seletction-row">\n        <label for="{{ set.name }}" class="custom-control custom-checkbox form-check-inline" ng-repeat="set in $ctrl.sets">\n            <input type="checkbox" class="custom-control-input" id="{{ set.name }}" ng-model="set.use">\n            <span class="custom-control-indicator"></span>\n            <span class="custom-control-description">{{ set.name }}</span>\n        </label>\n    </div>\n    <div class="row">\n        <button class="btn btn-primary" id="build" ng-click="$ctrl.handleBuild()">Build</button>\n    </div>\n</div>'),t.put("app/components/Card.html",'<div class="card">\n    <img class="card-image" ng-src="{{ $ctrl.card.image }}" alt="{{ $ctrl.card.name }}" check-loaded>\n    <div class="card-desc" style="display:none">\n        <h4 class="card-title">{{ $ctrl.card.name }}</h4>\n        <p class="card-text" ng-repeat="text in $ctrl.card.text track by $index">{{ text }}</p>\n    </div>\n</div>\n'),t.put("app/components/CardList.html",'<div class="flex-container">\n    <dominion-card ng-repeat="card in $ctrl.cards | filter:{show: true} track by $index" card="card"></dominion-card>\n</div>\n'),t.put("app/components/Nav.html",'<nav class="navbar navbar-light bg-faded">\n    <a class="navbar-brand" href="/">DomEngine</a>\n    <ul class="nav navbar-nav">\n        <li class="nav-item active">\n            <a class="nav-link" ng-href="inventory">Card Database</a>\n        </li>\n    </ul>\n    <!--<form class="form-inline pull-xs-right">\n        <input class="form-control" type="text" placeholder="Search">\n        <button class="btn btn-outline-success" type="submit">Search</button>\n    </form>-->\n</nav>'),t.put("app/components/Playset.html",'<div ng-class="{\'pt-page-current\': $ctrl.show == \'playset\'}" id="playsetPage" class="pt-page pt-page-scaleDown pt-page-scaleUp pt-page-ontop">\n    <button class="btn btn-outline-secondary close-button" ng-click="$ctrl.handleChangeShown()">\n        <i class="fa fa-times" aria-hidden="true"></i>\n        <span class="sr-only">Back</span>\n    </button>\n    <div id="playset" style="margin-top: 20px">\n        <card-list cards="$ctrl.playset.cards"></card-list>\n    </div>\n</div>\n'),t.put("app/components/SearchForm.html",'<form class="form" ng-submit="$ctrl.onSubmit()">\n    <div class="form-group">\n        <label for="cardName">Title</label>\n        <input type="text" class="form-control" id="cardName" ng-model="$ctrl.searchParams.name">\n    </div>\n    <div class="form-group">\n        <label ng-repeat="(type,value) in $ctrl.searchParams.types" for="{{ type }}" class="form-check-inline">\n            <input type="checkbox" id="{{ type }}" ng-model="$ctrl.searchParams.types[type]" class="form-check-input">\n            {{ type }}\n        </label>\n    </div>\n    <button type="submit" class="btn btn-primary">Search</button>\n</form>\n'),t.put("app/components/Welcome.html",'<div ng-class="{\'pt-page-current\': $ctrl.show == \'welcome\'}" id="welcomePage" class="pt-page pt-page-moveToTop pt-page-moveFromTop pt-page-ontop">\n    <div class="welcome-tron">\n        <h1>DomEngine</h1>\n        <p class="text">An attempt to make randomizing Dominion playsets easy</p>\n        <p class="text">\n            <small style="line-height: .5rem">\n                All images served from the\n                <a href="http://wiki.dominionstrategy.com/index.php/Main_Page" target="blank">Dominion Strategy Wiki</a>,\n                and are available under\n                <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" target="_blank">\n                    Creative Commons Attribution Non-Commercial Share Alike\n                </a>\n            </small>\n        </p>\n        <div class="container">\n            <div class="row">\n                <div class="col-xs-12" style="margin-top: 20px">\n                    <a href="inventory" class="btn btn-outline-success">Card Database</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'),t.put("app/containers/DomEngine.html",'<div id="pt-main" class="pt-perspective">\n    <welcome show="{{ $ctrl.show }}"></welcome>\n    <advanced-options config="$ctrl.config" show="{{ $ctrl.show }}"></advanced-options>\n    <playset playset="$ctrl.playSet" on-change-shown="$ctrl.onChangeShown($event)" show="{{ $ctrl.show }}"></playset>\n    <build-form sets="$ctrl.sets" on-build="$ctrl.onBuild()" on-change-shown="$ctrl.onChangeShown($event)" show="{{ $ctrl.show }}">\n    </build-form>\n</div>\n'),t.put("app/containers/Inventory.html",'<a href="/" id="return"><i class="fa fa-arrow-left fa-2x" aria-hidden="true"></i></a>\n<div class="container">\n    <div class="row">\n        <div class="col-xs-12">\n            <h1>DomEngine Database</h1>\n            <p>Search the through the database of Dominion Cards</p>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-12">\n            <search-form search-params="$ctrl.searchParams" on-search="$ctrl.search($event)"></search-form>\n        </div>\n    </div>\n    <div class="row">\n        <div class="col-xs-12">\n            <card-list cards="$ctrl.cards"></card-list>\n        </div>\n    </div>\n</div>\n')}])},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}var r=n(0),o=a(r),i=n(17),s=n(18),c=n(8),l=n(11),d=n(12),u=n(13),p=n(15),h=n(16),f=n(10),v=n(9),m=n(14),y=n(19),g=a(y);n(5),n(4);var b=n(20),w=a(b);n(7),o["default"].module("app",["ui.router","ngAnimate"]).config(w["default"]).service("DomEngineService",c.DomEngineService).component("domengine",i.DomEngine).component("inventory",s.Inventory).component("domengineNav",u.Nav).component("cardList",d.CardList).component("dominionCard",l.Card).component("searchForm",p.SearchForm).component("buildForm",f.BuildForm).component("advancedOptions",v.AdvancedOptions).component("welcome",h.Welcome).component("playset",m.Playset).directive("checkLoaded",g["default"])},,,,,function(t,e){},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();e.DomEngineService=function(){function t(e){n(this,t),this.$http=e}return t.$inject=["$http"],a(t,[{key:"getCards",value:function(){function t(t){return t.data}function e(t){console.log("XHR Failed for getCards."),console.log(t.data)}return this.$http.get("data/cards.json").then(t)["catch"](e)}},{key:"getSets",value:function(){function t(t){return t.data}function e(t){console.log("XHR Failed for getSets."),console.log(t.data)}return this.$http.get("data/sets.json").then(t)["catch"](e)}},{key:"getSupplyCards",value:function(){function t(t){return t.data}function e(t){console.log("XHR Failed for getSets."),console.log(t.data)}return this.$http.get("data/supplyCards.json").then(t)["catch"](e)}}]),t}()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),r=function(){function t(){n(this,t)}return a(t,[{key:"$onInit",value:function(){this.showHelpText=!1,this.selectedHelp={},this.helpBlocks={maxAttacks:{title:"Max Attack Cards",text:"Set the max number of Action-Attack cards."},reactRatio:{title:"Action-Reaction Ratio",text:"The number of attack cards that, if drawn, will require a Reaction card to negate attack cards. e.g.,\n        If set to 2, if 2 Action-Attack cards are drawn, 1 Reaction card will be included in the playset."}}}},{key:"onShowHelpText",value:function(t){this.showHelpText=!0,this.selectedHelp=this.helpBlocks[t]}},{key:"onHideHelpText",value:function(){this.showHelpText=!1}}]),t}();e.AdvancedOptions={templateUrl:"app/components/AdvancedOptions.html",controller:r,bindings:{config:"<",show:"@"}}},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),r=function(){function t(){n(this,t)}return a(t,[{key:"handleShowAdvancedOptions",value:function(){var t="advancedOptions"===this.show?"previous":"advancedOptions";this.onChangeShown({$event:{show:t}})}},{key:"handleBuild",value:function(){this.onBuild(),this.onChangeShown({$event:{show:"playset"}})}}]),t}();e.BuildForm={templateUrl:"app/components/BuildForm.html",controller:r,bindings:{sets:"<",onChangeShown:"&",onBuild:"&",show:"@"}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Card={templateUrl:"app/components/Card.html",bindings:{card:"<"}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.CardList={templateUrl:"app/components/CardList.html",bindings:{cards:"<"}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Nav={templateUrl:"app/components/Nav.html"}},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),r=function(){function t(){n(this,t)}return a(t,[{key:"handleChangeShown",value:function(){this.onChangeShown({$event:{show:"welcome"}})}}]),t}();e.Playset={templateUrl:"app/components/Playset.html",controller:r,bindings:{playset:"<",onChangeShown:"&",show:"@"}}},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),r=function(){function t(){n(this,t)}return a(t,[{key:"onSubmit",value:function(){this.onSearch({$event:{searchParams:this.searchParams}})}}]),t}();e.SearchForm={bindings:{searchParams:"<",searchTypes:"<",onSearch:"&"},templateUrl:"app/components/SearchForm.html",controller:r}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Welcome={templateUrl:"app/components/Welcome.html",bindings:{show:"@"}}},function(t,e){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),o=function(){function t(e){a(this,t),this._ds=e}return t.$inject=["DomEngineService"],r(t,[{key:"$onInit",value:function(){var t=this;this.sets=[],this.config={attackLimit:2,reactRatio:2,lowerBound:25,upperBound:42},this._ds.getSets().then(function(e){t.sets=e}),this.cards=[],this.show="welcome",this.showPrevious="welcome",this.allSupplyCards=[]}},{key:"onBuild",value:function(){var t=this;this.showPrevious="playset";var e=[],n=!0,a=!1,r=void 0;try{for(var o,i=this.sets[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;s.use&&e.push(s.name)}}catch(c){a=!0,r=c}finally{try{!n&&i["return"]&&i["return"]()}finally{if(a)throw r}}console.log(e),this._ds.getCards().then(function(e){return t.cards=e,t._ds.getSupplyCards()}).then(function(n){var a=[];t.allSupplyCards=n;var r=!0,o=!1,i=void 0;try{for(var s,c=t.cards[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;e.indexOf(l.set)!==-1&&a.push(l)}}catch(d){o=!0,i=d}finally{try{!r&&c["return"]&&c["return"]()}finally{if(o)throw i}}t.playSet=t.getPlayset(a,t.config),t.playSet.cards.sort(function(t,e){var n=t.cost.coin?parseInt(t.cost.coin.replace(/[\D]/gi,""),10):1,a=e.cost.coin?parseInt(e.cost.coin.replace(/[\D]/gi,""),10):1;return n<a?-1:n>a?1:0}),console.log(t.playSet)})}},{key:"getPlayset",value:function(t,e){var n={cards:[],totalAttacks:0,totalCost:0};return n=this.getSet(t,e,n,5),n=this.getSet(t,e,n),n.cards.length<10&&(e.upperBound=100,n=this.getSet(t,e,n)),n=this.setRequiredCards(n)}},{key:"getSet",value:function(t,e,n){for(var a=arguments.length<=3||void 0===arguments[3]?5:arguments[3],r=t.length,o=10-n.cards.length,i=o>=5?e.upperBound:e.lowerBound,s=o<a?o:a,c=0,l=0;c<s;){var d=this.randomNumber(r),u=t[d],p=u.cost.coin?parseInt(u.cost.coin.replace(/[\D]/gi,""),10):1,h=parseInt(u.types.indexOf("Attack"),10)>-1?1:0;if(l++,l>t.length)break;n.cards.indexOf(u)===-1&&n.totalAttacks+h<=e.attackLimit&&n.totalCost+p<=i&&(n.cards.push(u),n.totalAttacks+=h,n.totalCost+=p,c++)}return n}},{key:"setRequiredCards",value:function(t){var e=new Set,a=new Set;e.add(this.getCard("Copper",this.allSupplyCards)),e.add(this.getCard("Silver",this.allSupplyCards)),e.add(this.getCard("Gold",this.allSupplyCards)),e.add(this.getCard("Estate",this.allSupplyCards)),e.add(this.getCard("Duchy",this.allSupplyCards)),e.add(this.getCard("Province",this.allSupplyCards));var r=!0,o=!1,i=void 0;try{for(var s,c=t.cards[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value,d=!0,u=!1,p=void 0;try{for(var h,f=l.requires[Symbol.iterator]();!(d=(h=f.next()).done);d=!0){var v=h.value,m=this.getCard(v,this.allSupplyCards);m?m.types.indexOf("Supply")===-1?a.add(m):e.add(m):(console.log("Cannot find required card"),console.log(v))}}catch(y){u=!0,p=y}finally{try{!d&&f["return"]&&f["return"]()}finally{if(u)throw p}}}}catch(y){o=!0,i=y}finally{try{!r&&c["return"]&&c["return"]()}finally{if(o)throw i}}return t.requiredCards={supply:[].concat(n(e)),other:[].concat(n(a))},t}},{key:"getCard",value:function(t,e){var n=!0,a=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;if(s.name===t)return s}}catch(c){a=!0,r=c}finally{try{!n&&i["return"]&&i["return"]()}finally{if(a)throw r}}}},{key:"randomNumber",value:function(t){return Math.floor(Math.random()*t)}},{key:"onChangeShown",value:function(t){var e=t.show;this.show="previous"===e?this.showPrevious:e}}]),t}();e.DomEngine={templateUrl:"app/containers/DomEngine.html",controller:o}},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),r=function(){function t(e){n(this,t),this._ds=e}return t.$inject=["DomEngineService"],a(t,[{key:"$onInit",value:function(){var t=this;this.cards=[],this.searchParams={name:"",types:[]},this._ds.getCards(this.searchParams).then(function(e){t.searchParams.types=t.setTypes(e),t.cards=e})}},{key:"setTypes",value:function(t){var e={},n=!0,a=!1,r=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value,c=!0,l=!1,d=void 0;try{for(var u,p=s.types[Symbol.iterator]();!(c=(u=p.next()).done);c=!0){var h=u.value;h in e||(e[h]=!1)}}catch(f){l=!0,d=f}finally{try{!c&&p["return"]&&p["return"]()}finally{if(l)throw d}}}}catch(f){a=!0,r=f}finally{try{!n&&i["return"]&&i["return"]()}finally{if(a)throw r}}return e}},{key:"search",value:function(t){var e=t.searchParams;if(e){this.searchParams=e;var n=!0,a=!1,r=void 0;try{for(var o,i=this.cards[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value,c=!0;if(e.name&&c){var l=0,d=new RegExp(e.name,"gi");if(s.name.match(d))l+=1;else{var u=!0,p=!1,h=void 0;try{for(var f,v=s.text[Symbol.iterator]();!(u=(f=v.next()).done);u=!0){var m=f.value;m.match(d)&&(l+=1)}}catch(y){p=!0,h=y}finally{try{!u&&v["return"]&&v["return"]()}finally{if(p)throw h}}}c=l>0}var g=[];for(var b in e.types)e.types[b]&&g.push(b);if(c&&g.length>0){var w=0,k=!0,x=!1,S=void 0;try{for(var C,$=g[Symbol.iterator]();!(k=(C=$.next()).done);k=!0){var P=C.value;w=s.types.indexOf(P)>-1?w+1:w}}catch(y){x=!0,S=y}finally{try{!k&&$["return"]&&$["return"]()}finally{if(x)throw S}}c=w>0}s.show=c}}catch(y){a=!0,r=y}finally{try{!n&&i["return"]&&i["return"]()}finally{if(a)throw r}}}}}]),t}();e.Inventory={templateUrl:"app/containers/Inventory.html",controller:r}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return{restrict:"A",link:function(t,e){var n=function(){e.parent().children().css({display:"inline-block"}),e.css({display:"none"})};e.on("error",function(){return n()})}}};e["default"]=n},function(t,e){"use strict";function n(t,e,n){n.html5Mode(!0).hashPrefix("!"),e.otherwise("/"),t.state("domengine",{url:"/",template:"<domengine></domengine>"}).state("inventory",{url:"/inventory",template:"<inventory></inventory>"})}n.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){n(2),t.exports=n(1)}],[21]);